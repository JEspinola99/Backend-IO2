generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Usuario {
  id                Int                        @id @default(autoincrement())
  email             String                     @unique
  nombre            String
  hashedPassword    String
  createdAt         DateTime                   @default(now())
  updatedAt         DateTime                   @updatedAt
  espaciosDeTrabajo EspaciosDeTrabajoUsuario[]
}

model EspacioDeTrabajo {
  id        Int                        @id @default(autoincrement())
  nombre    String                     @unique
  creadorId Int
  usuarios  EspaciosDeTrabajoUsuario[]
  Tablero   Tablero[]
}

model EspaciosDeTrabajoUsuario {
  usuario            Usuario          @relation(fields: [usuarioId], references: [id])
  usuarioId          Int
  espacioDeTrabajo   EspacioDeTrabajo @relation(fields: [espacioDeTrabajoId], references: [id])
  espacioDeTrabajoId Int

  @@id([usuarioId, espacioDeTrabajoId])
}

model Tablero {
  id                 Int              @id @default(autoincrement())
  nombre             String           @unique
  fechaCreacion      DateTime         @default(now())
  espacioDeTrabajoId Int
  espacioDeTrabajo   EspacioDeTrabajo @relation(fields: [espacioDeTrabajoId], references: [id])
  Columna            Columna[]
}

model Columna {
  id        Int     @id @default(autoincrement())
  nombre    String  @unique
  tableroId Int
  tablero   Tablero @relation(fields: [tableroId], references: [id])
}

// model Tarea {
//   id Int @id @default(autoincrement())
//   descripcion String
//   titulo String
//   fechaCreacion DateTime
//   fechaVencimiento DateTime
//   usuarioId Int
//   usuario User @relation(fields: [usuarioId], references: [id])
//   etiquetaId Int
//   etiqueta Etiqueta @relation(fields: [etiquetaId], references: [id])
// }

// model Etiqueta {
//   id Int @id @default(autoincrement())
//   nombre String @unique
//   color String
// }

// model TareasXColumnas {
//   columnaId Int
//   tareaId Int
//   fechaAlta DateTime
//   fechaBaja DateTime
//   columna Columna @relation(fields: [columnaId], references: [id])
//   tarea Tarea @relation(fields: [tareaId], references: [id])
// }
